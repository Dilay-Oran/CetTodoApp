<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:conv="clr-namespace:CetTodoApp.Converters"
             x:Class="CetTodoApp.MainPage">

    <ContentPage.Resources>
        <conv:RedOverDue x:Key="OverdueToRedConverter" />
        <conv:StrikeThrough x:Key="CompletionToStrikethroughConverter" />
    </ContentPage.Resources>

    <VerticalStackLayout Padding="20" Margin="20">

        <Border Margin="20">
            <VerticalStackLayout Margin="10" Padding="10">

                <Entry x:Name="Title"
                      Placeholder="Enter a todo Item"
                      TextChanged="TextChanged" />

                <HorizontalStackLayout Padding="20" Margin="10">
                    <Label Text="Due Date :" VerticalOptions="Center"/>
                    <DatePicker x:Name="DueDate"
                                VerticalOptions="Center"
                                DateSelected="DateChanged"/>
                </HorizontalStackLayout>

                <Button x:Name="AddButton"
                       Text="Save"
                       IsEnabled="False"
                       Clicked="AddButton_OnClicked"/>

            </VerticalStackLayout>
        </Border>

        <ScrollView>
            <ListView x:Name="TasksListView"
                      ItemSelected="TasksListView_OnItemSelected">

                <ListView.ItemTemplate>
                    <DataTemplate>
                        <ViewCell>
                            <StackLayout Orientation="Horizontal">

                                <Label Text="{Binding Title}"
                                       VerticalOptions="Center"
                                       TextColor="{Binding DueDate, Converter={StaticResource OverdueToRedConverter}}"
                                       TextDecorations="{Binding IsComplete, Converter={StaticResource CompletionToStrikethroughConverter}}"/>

                                <Label Text="{Binding DueDate, StringFormat=' (Due: {0:dd/MM})'}"
                                       VerticalOptions="Center"/>

                                <CheckBox IsChecked="{Binding IsComplete}"
                                          IsEnabled="False"
                                          VerticalOptions="Center"/>
                            </StackLayout>
                        </ViewCell>
                    </DataTemplate>
                </ListView.ItemTemplate>

            </ListView>
        </ScrollView>
    </VerticalStackLayout>

</ContentPage>
